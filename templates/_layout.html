<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Craft CMS IoT PoC - {{ title }}</title>

    {# Material Design #}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
            
    {# Leaflet #}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin="" />


    {% do view.registerJsFile("/assets/scripts/jquery.js") %} 
    {% do view.registerJsFile("/assets/scripts/moment.js") %} 

    <script src="https://js.pusher.com/4.1/pusher.min.js"></script>
    <script>

      // Enable pusher logging - don't include this in production
      Pusher.logToConsole = true;

      var pusher = new Pusher('9e129f0beb6fd9dbe0d9', {
        cluster: 'us2',
        encrypted: true
      });

      var channel = pusher.subscribe('my-channel');
      channel.bind('my-event', function(data) {
        console.log(data);

        $('#' + data.device + '-' + data.signal).text(data.value);
        $('#' + data.device + '-updated').text(moment().format('YYYY-MM-DD HH:mm:ss'));
      });
    </script>

    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
      integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
      crossorigin=""></script>

  </head>
  <body>
    <header>
      <div class="navbar-fixed">
        <nav class="navbar white">
          <div class="nav-wrapper">
            {% block title %}
              <div class="brand-logo center grey-text text-darken-2">{{ title }}</div>
            {% endblock %}
          </div>
        </nav>
      </div>
    </header>
    <main>
      {% block main %}
      {% endblock %}
    </main>
  </body>
</html>

